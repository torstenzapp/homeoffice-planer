<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Office Planer</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <h1>Home Office Planer</h1>
            <p>W√§hlen Sie Ihren Login-Typ:</p>
            
            <div class="login-options">
                <button type="button" class="btn btn--primary btn--full-width" id="employeeLoginBtn">
                    üë§ Mitarbeiter
                </button>
                <button type="button" class="btn btn--primary btn--full-width" id="teamLeaderLoginBtn">
                    üë®‚Äçüíº Teamleiter
                </button>
                <button type="button" class="btn btn--outline btn--full-width" id="newEmployeeBtn">
                    ‚ûï Neuer Mitarbeiter
                </button>
            </div>
        </div>
    </div>

    <!-- Employee Login Modal -->
    <div id="employeeLoginModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Mitarbeiter Login</h3>
                <button type="button" class="modal-close" data-modal="employeeLoginModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label" for="employeeName">Name:</label>
                    <select id="employeeName" class="form-control">
                        <option value="">W√§hlen Sie Ihren Namen</option>
                        <option value="Torsten Zapp">Torsten</option>
                        <option value="Anna">Anna</option>
                        <option value="Michael">Michael</option>
                        <option value="Sarah">Sarah</option>
                        <option value="Thomas">Thomas</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="employeePassword">Passwort:</label>
                    <input type="password" id="employeePassword" class="form-control" placeholder="Passwort eingeben">
                </div>
                <div id="employeeLoginError" class="error-message hidden"></div>
                <button type="button" class="btn btn--primary btn--full-width" id="employeeLoginSubmit">Anmelden</button>
            </div>
        </div>
    </div>

    <!-- Team Leader Login Modal -->
    <div id="teamLeaderLoginModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Teamleiter Login</h3>
                <button type="button" class="modal-close" data-modal="teamLeaderLoginModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label" for="teamLeaderPassword">Teamleiter Passwort:</label>
                    <input type="password" id="teamLeaderPassword" class="form-control" placeholder="Teamleiter Passwort">
                </div>
                <div id="teamLeaderLoginError" class="error-message hidden"></div>
                <button type="button" class="btn btn--primary btn--full-width" id="teamLeaderLoginSubmit">Anmelden</button>
            </div>
        </div>
    </div>

    <!-- New Employee Registration Modal -->
    <div id="newEmployeeModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Neuer Mitarbeiter</h3>
                <button type="button" class="modal-close" data-modal="newEmployeeModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label" for="newEmployeeName">Name:</label>
                    <input type="text" id="newEmployeeName" class="form-control" placeholder="Vollst√§ndiger Name">
                </div>
                <div class="form-group">
                    <label class="form-label" for="newEmployeePassword">Passwort:</label>
                    <input type="password" id="newEmployeePassword" class="form-control" placeholder="Neues Passwort">
                </div>
                <div class="form-group">
                    <label class="form-label" for="newEmployeePasswordConfirm">Passwort best√§tigen:</label>
                    <input type="password" id="newEmployeePasswordConfirm" class="form-control" placeholder="Passwort wiederholen">
                </div>
                <div id="newEmployeeError" class="error-message hidden"></div>
                <button type="button" class="btn btn--primary btn--full-width" id="newEmployeeSubmit">Registrieren</button>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="main-app hidden">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <h1>Home Office Planer</h1>
                <div class="header-actions">
                    <span id="userWelcome" class="user-welcome"></span>
                    <div class="header-buttons">
                        <button id="teamLeaderNav" class="btn btn--secondary hidden" type="button">Team √úbersicht</button>
                        <button class="btn btn--outline" type="button" id="settingsBtn">‚öôÔ∏è</button>
                        <button class="btn btn--outline" type="button" id="logoutBtn">Abmelden</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Team Leader Navigation -->
        <nav id="teamLeaderNavigation" class="team-nav hidden">
            <div class="nav-tabs">
                <button type="button" class="tab-button active" data-tab="overview">√úbersicht</button>
                <button type="button" class="tab-button" data-tab="details">Details</button>
                <button type="button" class="tab-button" data-tab="reports">Berichte</button>
            </div>
        </nav>

        <!-- Calendar View -->
        <div id="calendarView" class="calendar-view">
            <div class="calendar-header">
                <button type="button" class="btn btn--outline" id="prevMonthBtn">&lt;</button>
                <h2 id="currentMonth"></h2>
                <button type="button" class="btn btn--outline" id="nextMonthBtn">&gt;</button>
            </div>
            
            <div class="calendar-legend">
                <div class="legend-item">
                    <span class="status-indicator" style="background-color: #FF8C00;">üè†</span>
                    <span>Home-Office</span>
                </div>
                <div class="legend-item">
                    <span class="status-indicator" style="background-color: #4169E1;">üè¢</span>
                    <span>B√ºro</span>
                </div>
                <div class="legend-item">
                    <span class="status-indicator" style="background-color: #32CD32;">üèñÔ∏è</span>
                    <span>Urlaub</span>
                </div>
                <div class="legend-item">
                    <span class="status-indicator" style="background-color: #808080;">‚è∞</span>
                    <span>AZ</span>
                </div>
            </div>
            
            <div class="calendar-grid">
                <div class="calendar-day-header">Mo</div>
                <div class="calendar-day-header">Di</div>
                <div class="calendar-day-header">Mi</div>
                <div class="calendar-day-header">Do</div>
                <div class="calendar-day-header">Fr</div>
                <div class="calendar-day-header">Sa</div>
                <div class="calendar-day-header">So</div>
                <!-- Calendar days will be generated by JavaScript -->
            </div>
        </div>

        <!-- Team Overview Panel -->
        <div id="teamOverviewPanel" class="team-panel hidden">
            <div id="overviewTab" class="tab-content active">
                <div class="team-stats">
                    <div class="stat-card">
                        <h3>Team Statistiken</h3>
                        <div id="teamStatistics"></div>
                    </div>
                </div>
                <div class="team-members">
                    <h3>Mitarbeiter heute</h3>
                    <div id="todayTeamStatus"></div>
                </div>
            </div>
            
            <div id="detailsTab" class="tab-content">
                <div class="team-details">
                    <h3>Mitarbeiter Details</h3>
                    <div id="employeeDetails"></div>
                </div>
            </div>
            
            <div id="reportsTab" class="tab-content">
                <div class="reports-section">
                    <h3>Berichte</h3>
                    <div class="report-controls">
                        <select id="reportMonth" class="form-control">
                            <!-- Will be populated by JavaScript -->
                        </select>
                        <button type="button" class="btn btn--primary" id="generateReportBtn">Bericht erstellen</button>
                        <button type="button" class="btn btn--outline" id="exportDataBtn">Daten exportieren</button>
                    </div>
                    <div id="reportResults"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Status Selection Modal -->
    <div id="statusModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Status w√§hlen</h3>
                <button type="button" class="modal-close" data-modal="statusModal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Status f√ºr <span id="selectedDate"></span> w√§hlen:</p>
                <div class="status-options">
                    <button type="button" class="status-button" data-status="homeoffice">
                        <span class="status-icon">üè†</span>
                        <span>Home-Office</span>
                    </button>
                    <button type="button" class="status-button" data-status="buero">
                        <span class="status-icon">üè¢</span>
                        <span>B√ºro</span>
                    </button>
                    <button type="button" class="status-button" data-status="urlaub">
                        <span class="status-icon">üèñÔ∏è</span>
                        <span>Urlaub</span>
                    </button>
                    <button type="button" class="status-button" data-status="az">
                        <span class="status-icon">‚è∞</span>
                        <span>AZ</span>
                    </button>
                    <button type="button" class="status-button status-remove" data-status="remove">
                        <span class="status-icon">üóëÔ∏è</span>
                        <span>Entfernen</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Einstellungen</h3>
                <button type="button" class="modal-close" data-modal="settingsModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h4>Passwort √§ndern</h4>
                    <div class="form-group">
                        <label class="form-label" for="currentPassword">Aktuelles Passwort:</label>
                        <input type="password" id="currentPassword" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="newPassword">Neues Passwort:</label>
                        <input type="password" id="newPassword" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="confirmPassword">Passwort best√§tigen:</label>
                        <input type="password" id="confirmPassword" class="form-control">
                    </div>
                    <button type="button" class="btn btn--primary" id="changePasswordBtn">Passwort √§ndern</button>
                </div>
                
                <div id="teamLeaderSettings" class="settings-section hidden">
                    <h4>Team-Verwaltung</h4>
                    <div class="form-group">
                        <label class="form-label" for="quotaSettings">Standard Home-Office Quote (%):</label>
                        <input type="number" id="quotaSettings" class="form-control" value="40" min="0" max="100">
                    </div>
                    <button type="button" class="btn btn--primary" id="updateQuotaBtn">Quote aktualisieren</button>
                </div>

                <div class="settings-section danger-section">
                    <h4>Gefahrenzone</h4>
                    <button type="button" class="btn btn--error" id="deleteAccountBtn">Account l√∂schen</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Connection Status -->
    <div id="connectionStatus" class="connection-status hidden">
        <span id="connectionMessage"></span>
    </div>

    <!-- Loading Indicator -->
    <div id="loadingIndicator" class="loading hidden">
        <div class="loading-spinner"></div>
        <p>Laden...</p>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="app.js"></script>
</body>
</html>
