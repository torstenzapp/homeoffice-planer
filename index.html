<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HomeOffice Planer – PWA (überarbeitet)</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0ea5e9" />
  <link rel="icon" href="icons/icon-192.png" />

  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="app-header">
    <h1>HomeOffice Planer</h1>
    <nav id="nav" class="nav hidden">
      <button id="btn-logout" class="btn btn-secondary">Abmelden</button>
    </nav>
  </header>

  <main class="container">
    <!-- Auth -->
    <section id="auth-view" class="card">
      <h2>Anmelden</h2>
      <div class="tabs">
        <button class="tab active" data-tab="login">Login</button>
        <button class="tab" data-tab="register">Registrieren</button>
      </div>
      <div id="tab-login" class="tab-panel">
        <label>E-Mail
          <input id="login-email" type="email" autocomplete="username" required />
        </label>
        <label>Passwort
          <input id="login-password" type="password" autocomplete="current-password" required />
        </label>
        <button id="btn-login" class="btn btn-primary">Einloggen</button>
      </div>
      <div id="tab-register" class="tab-panel hidden">
        <label>Name
          <input id="reg-name" type="text" required />
        </label>
        <label>E-Mail
          <input id="reg-email" type="email" autocomplete="username" required />
        </label>
        <label>Passwort
          <input id="reg-password" type="password" autocomplete="new-password" required />
        </label>
        <label>Rolle
          <select id="reg-role">
            <option value="kollege">Kollege</option>
            <option value="teamleiter">Teamleiter</option>
          </select>
        </label>
        <button id="btn-register" class="btn btn-primary">Konto erstellen</button>
      </div>
      <p id="auth-msg" class="msg"></p>
    </section>

    <!-- App -->
    <section id="app-view" class="hidden">
      <div class="card">
        <div class="row">
          <div>
            <label>Monat
              <input id="month-picker" type="month" />
            </label>
          </div>
          <div>
            <label>Status wählen
              <select id="status-select">
                <option value="">—</option>
                <option value="HO">Homeoffice</option>
                <option value="BU">Büro</option>
                <option value="KR">Krank</option>
                <option value="UR">Urlaub</option>
                <option value="A">A</option>
                <option value="B">B</option>
                <option value="C">C</option>
                <option value="D">D</option>
                <option value="E">E</option>
                <option value="F">F</option>
                <option value="G">G</option>
                <option value="H">H</option>
                <option value="I">I</option>
                <option value="J">J</option>
                <option value="K">K</option>
                <option value="L">L</option>
                <option value="M">M</option>
                <option value="N">N</option>
                <option value="O">O</option>
                <option value="P">P</option>
                <option value="Q">Q</option>
                <option value="R">R</option>
                <option value="S">S</option>
                <option value="T">T</option>
                <option value="U">U</option>
                <option value="V">V</option>
                <option value="W">W</option>
                <option value="X">X</option>
                <option value="Y">Y</option>
                <option value="Z">Z</option>
              </select>
            </label>
          </div>
          <div class="role-badge" id="role-badge"></div>
        </div>
        <div id="calendar" class="calendar"></div>
        <div id="stats" class="stats"></div>
      </div>

      <div class="card">
        <h3>Export / Import</h3>
        <div class="row">
          <button id="btn-export" class="btn">Monat exportieren (JSON)</button>
          <label class="btn">
            Importieren
            <input id="file-import" type="file" accept="application/json" hidden />
          </label>
        </div>
      </div>

      <div id="team-view" class="card hidden">
        <h3>Team-Übersicht (nur Teamleiter)</h3>
        <div id="team-list" class="team-list"></div>
      </div>
    </section>
  </main>

  <!-- Firebase SDKs (modular) -->
  <script type="module" src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
  <script type="module" src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js"></script>
  <script type="module" src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js"></script>

  <!-- Deine Config separat (du ersetzt Platzhalter in firebase-config.sample.js und benennst sie in firebase-config.js um) -->
  <script type="module" src="firebase-config.js"></script>
  <script type="module" src="app.js"></script>

  <script>
    // PWA registrieren
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js');
      });
    }
  </script>
</body>
</html>
